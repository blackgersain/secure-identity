{"version":3,"sources":["../../src/pages/home/home.module.ts","../../src/pages/home/home.ts","../../src/dtos/kairos-verify-rq.ts","../../src/shared/patients.ts"],"names":[],"mappings":"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","file":"0.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { HomePage } from './home';\n\n@NgModule({\n  declarations: [\n    HomePage,\n  ],\n  imports: [\n    IonicPageModule.forChild(HomePage),\n  ],\n})\nexport class HomePageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/home/home.module.ts","import { Component } from '@angular/core';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport { IonicPage, NavController, NavParams } from 'ionic-angular';\nimport { KairosVerifyRq } from '../../dtos/kairos-verify-rq';\nimport { KairosVerifyRs } from '../../dtos/kairos-verify-rs';\nimport { CommonProvider } from '../../providers/common/common';\nimport { KairosProvider } from '../../providers/kairos/kairos';\nimport { PAGES } from '../../shared/pages';\nimport { PATIENTS } from '../../shared/patients';\n\n@IonicPage()\n@Component({\n    selector: 'page-home',\n    templateUrl: 'home.html'\n})\nexport class HomePage {\n\n    private readonly faceImageShadow: string = '../../assets/imgs/person-shadow.png';\n\n    private formGroup: FormGroup;\n    private faceImage: string = this.faceImageShadow;\n\n    constructor(public navCtrl: NavController\n              , private navParams: NavParams\n              , private kairosProvider: KairosProvider\n              , private formBuilder: FormBuilder\n              , private common: CommonProvider) \n    {\n        this.formGroup = this.formBuilder.group({\n            nombreFormCtrl: [\n                ''\n                , Validators.compose([])\n            ],\n            apellidoFormCtrl: [\n                ''\n                , Validators.compose([])\n            ],\n            documentoIdentidadFormCtrl: [\n                ''\n                , Validators.compose([\n                      Validators.required\n                ])\n            ],\n            idFormulaFormCtrl: [\n                ''\n                , Validators.compose([])\n            ]\n        });\n    }\n\n    ionViewWillEnter(): void {\n        let image = this.navParams.get('image') || null;\n        if (image) this.faceImage = image;\n    }\n\n    captureImage(): void {\n        this.navCtrl.push(PAGES.ImageCapture);\n    }\n\n    verifyImage(image): void {\n        let kairosVerifyRq: KairosVerifyRq = new KairosVerifyRq();\n        kairosVerifyRq.subjectId = this.formGroup.value.documentoIdentidadFormCtrl;\n        kairosVerifyRq.image = image;\n        this.kairosProvider.verify(kairosVerifyRq).subscribe(\n            (kairosVerifyRs: KairosVerifyRs): void => {\n                console.log('Kairos response: ' + JSON.stringify(kairosVerifyRs));\n                this.common.presentAcceptAlert('Información', \"kairosProvider.verify success \" + JSON.stringify(kairosVerifyRs));\n                let patient = PATIENTS.find((_patient) => _patient.id == kairosVerifyRs.images[0].transaction.subjectId);\n                this.formGroup.value.nombreFormCtrl.setValue(patient.name);\n                this.formGroup.value.apellidoFormCtrl.setValue(patient.surname);\n            },\n            (error: any): void => {\n                this.common.presentAcceptAlert('Alerta', \"kairosProvider.verify error: \" + error);\n            }\n        );\n    }\n\n    captureFingerprint(): void {\n\n    }\n\n    validarIdentidad(): void {\n        if (!this.formGroup.valid) return; \n\n        let kairosVerifyRq: KairosVerifyRq = new KairosVerifyRq();\n        kairosVerifyRq.subjectId = this.formGroup.value.documentoIdentidadFormCtrl;\n        kairosVerifyRq.image = this.faceImage;\ndebugger;\n        this.kairosProvider.verify(kairosVerifyRq).subscribe(\n            (kairosVerifyRs: KairosVerifyRs): void => {\n                console.log('Kairos response: ' + JSON.stringify(kairosVerifyRs));\n                this.common.presentAcceptAlert('Información', \"Validación de identidad por reconocimiento facial realizada exitosamente.\");\n                let patient = PATIENTS.find((_patient) => _patient.id == kairosVerifyRs.images[0].transaction.subjectId);\n                this.formGroup.value.nombreFormCtrl.setValue(patient.name);\n                this.formGroup.value.apellidoFormCtrl.setValue(patient.surname);\n            },\n            (error: any): void => {\n                this.common.presentAcceptAlert('Alerta', \"kairosProvider.verify error: \" + error);\n            }\n        );\n    }\n\n    reset(): void {\n        this.faceImage = this.faceImageShadow; \n        this.formGroup.reset();\n    }\n}\n\n//TODO: set message for verification success\n//TODO: set message for verification failure\n\n\n// WEBPACK FOOTER //\n// ./src/pages/home/home.ts","export class KairosVerifyRq {\n\n    private _image: string;\n    private _galleryName: string;\n    private _subjectId: string;\n\n    public get image(): string {\n        return this._image;\n    }\n\n    public set image(image: string) {\n        this._image = image;\n    }\n\n    public get galleryName(): string {\n        return this._galleryName;\n    }\n\n    public set galleryName(galleryName: string) {\n        this._galleryName = galleryName;\n    }\n\n    public get subjectId(): string {\n        return this._subjectId;\n    }\n\n    public set subjectId(subjectId: string) {\n        this._subjectId = subjectId;\n    }\n\n    public stringify(): string {\n        return JSON.stringify(\n            {\n                  gallery_name: this.galleryName\n                , subject_id: this.subjectId\n                , image: this.image\n            }\n        )\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/dtos/kairos-verify-rq.ts","export const PATIENTS = [\n    {\n          \"id\": 1152449035\n        , \"name\": \"Gersain\"\n        , \"surname\": \"Castañeda\"\n    },\n    {\n          \"id\": \"\"\n        , \"name\": \"Maira\"\n        , \"surname\": \"Jayk\"\n    },\n    {\n          \"id\": 8163442\n        , \"name\": \"Martin Julian\"\n        , \"surname\": \"Osorio Marulanda\"\n    },\n    {\n          \"id\": 1128470162\n        , \"name\": \"Duván\"\n        , \"surname\": \"Corrales\"\n    }\n]\n\n\n// WEBPACK FOOTER //\n// ./src/shared/patients.ts"],"sourceRoot":""}