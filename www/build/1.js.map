{"version":3,"sources":["../../src/pages/enrollment/enrollment.module.ts","../../src/dtos/kairos-verify-rq.ts","../../src/pages/enrollment/enrollment.ts"],"names":[],"mappings":"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","file":"1.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { EnrollmentPage } from './enrollment';\n\n@NgModule({\n  declarations: [\n    EnrollmentPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(EnrollmentPage),\n  ],\n})\nexport class EnrollmentPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/enrollment/enrollment.module.ts","export class KairosVerifyRq {\n\n    private _image: string;\n    private _galleryName: string;\n    private _subjectId: string;\n\n    public get image(): string {\n        return this._image;\n    }\n\n    public set image(image: string) {\n        this._image = image;\n    }\n\n    public get galleryName(): string {\n        return this._galleryName;\n    }\n\n    public set galleryName(galleryName: string) {\n        this._galleryName = galleryName;\n    }\n\n    public get subjectId(): string {\n        return this._subjectId;\n    }\n\n    public set subjectId(subjectId: string) {\n        this._subjectId = subjectId;\n    }\n\n    public stringify(): string {\n        return JSON.stringify(\n            {\n                  gallery_name: this.galleryName\n                , subject_id: this.subjectId\n                , image: this.image\n            }\n        )\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/dtos/kairos-verify-rq.ts","import { Component } from '@angular/core';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport { IonicPage, NavController, NavParams } from 'ionic-angular';\nimport { KairosEnrollRs } from '../../dtos/kairos-enroll-rs';\nimport { KairosVerifyRq } from '../../dtos/kairos-verify-rq';\nimport { CommonProvider } from '../../providers/common/common';\nimport { KairosProvider } from '../../providers/kairos/kairos';\nimport { PAGES } from '../../shared/pages';\n\n@IonicPage()\n@Component({\n    selector: 'page-enrollment',\n    templateUrl: 'enrollment.html',\n})\nexport class EnrollmentPage {\n\n    private readonly faceImageShadow: string = '../../assets/imgs/person-shadow.png';\n\n    private formGroup: FormGroup;\n    private faceImage: string = this.faceImageShadow;\n    \n    constructor(public navCtrl: NavController\n              , public navParams: NavParams\n              , private kairosProvider: KairosProvider\n              , private formBuilder: FormBuilder\n              , private common: CommonProvider) \n    {\n        this.formGroup = this.formBuilder.group({\n            nombreFormCtrl: [\n                ''\n                , Validators.compose([])\n            ],\n            apellidoFormCtrl: [\n                ''\n                , Validators.compose([])\n            ],\n            documentoIdentidadFormCtrl: [\n                ''\n                , Validators.compose([\n                      Validators.required\n                ])\n            ],\n            idFormulaFormCtrl: [\n                ''\n                , Validators.compose([])\n            ]\n        });\n    }\n\n    ionViewWillEnter(): void {\n        let image = this.navParams.get('image') || null;\n        if (image) this.faceImage = image;\n    }\n\n    captureImage(): void {\n        this.navCtrl.push(PAGES.ImageCapture);\n    }\n\n    captureFingerprint(): void {\n\n    }\n\n    enroll(): void {\n        if (!this.formGroup.valid) return; \n\n        let kairosVerifyRq: KairosVerifyRq = new KairosVerifyRq();\n\n        kairosVerifyRq.subjectId = this.formGroup.value.documentoIdentidadFormCtrl;\n        kairosVerifyRq.image = this.faceImage;\n\n        this.kairosProvider.enroll(kairosVerifyRq).subscribe(\n            (kairosEnrollRs: KairosEnrollRs): void => {\n                console.log('Kairos response: ' + JSON.stringify(kairosEnrollRs));\n                let patient =  {\n                      \"id\": this.formGroup.value.documentoIdentidadFormCtrl\n                    , \"name\": this.formGroup.value.nombreFormCtrl\n                    , \"surname\": this.formGroup.value.apellidoFormCtrl\n                };\n                let message: string = 'El paciente ' + patient.name + ' ' + patient.surname + ' con cédula de ciudadanína número ' + patient.id + ' ha sido inscrito exitosamente a biometría facial.';\n                this.common.presentAcceptAlert('Inscripción Exitosa!', message);\n            },\n            (error: any): void => {\n                this.common.presentAcceptAlert('Alerta', \"kairosProvider.verify error: \" + error);\n            }\n        );\n    }\n\n    reset(): void {\n        this.faceImage = this.faceImageShadow; \n        this.formGroup.reset();\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/enrollment/enrollment.ts"],"sourceRoot":""}